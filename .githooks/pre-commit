#!/bin/sh
echo "Running pre-commit checks..."
#./gradlew clean build
gradle.bat clean build
RESULT=$?
if [ $RESULT -ne 0 ]; then
    echo "Pre-commit checks failed. Commit aborted."
    exit 1
fi

echo "Running code formatting with Spotless..."
#./gradlew spotlessApply
gradle.bat spotlessApply
RESULT=$?
if [ $RESULT -ne 0 ]; then
    echo "Code formatting failed. Commit aborted."
    exit 1
fi

# 変更されたファイルを再度ステージングする
git add -u

exit 0