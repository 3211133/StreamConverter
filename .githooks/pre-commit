#!/bin/sh

# Get the commit message
commit_msg_file=$1
#if [ -z "$commit_msg_file" ]; then
  # If running manually (not as a hook), use the staged commit message
  # commit_msg_file=".git/COMMIT_EDITMSG"
#fi

# Run the consolidated commit checks script
# "$(git rev-parse --show-toplevel)/scripts/commit-checks.sh" pre-commit "$commit_msg_file"

# Exit with the same status as the script
exit $?
#!/bin/sh
echo "Running pre-commit checks..."
./gradlew clean build
RESULT=$?
if [ $RESULT -ne 0 ]; then
    echo "Pre-commit checks failed. Commit aborted."
    exit 1
fi

echo "Running code formatting with Spotless..."
./gradlew spotlessApply
RESULT=$?
if [ $RESULT -ne 0 ]; then
    echo "Code formatting failed. Commit aborted."
    exit 1
fi

# 変更されたファイルを再度ステージングする
git add -u

exit 0